CREATE DATABASE ARURAL; 
USE ARURAL;
CREATE TABLE ALOJAMIENTO(
cod_alojamiento INT PRIMARY KEY NOT NULL,
nombre VARCHAR(45),
direccion VARCHAR(45),
telefono VARCHAR(15),
categoria VARCHAR(45)
);
CREATE TABLE PERSONA(
nif VARCHAR(10) PRIMARY KEY NOT NULL,
nombre VARCHAR(45),
direccion VARCHAR(45)
);
CREATE TABLE HUESPED(
id_huesped INT PRIMARY KEY NOT NULL,
nif VARCHAR(10),
CONSTRAINT fk_HUESPED_PERSONA
FOREIGN KEY (nif)
REFERENCES PERSONA(nif)
ON UPDATE CASCADE
ON DELETE CASCADE
);
CREATE TABLE HABITACION(
num_habitacion INT PRIMARY KEY NOT NULL,
tipo VARCHAR(45),
precio DECIMAL(6,2),
ba√±o VARCHAR(2),
id_huesped INT,
cod_alojamiento INT,
CONSTRAINT fk_HABITACION_HUESPED
FOREIGN KEY (id_huesped)
REFERENCES HUESPED(id_huesped)
ON UPDATE CASCADE
ON DELETE CASCADE,
CONSTRAINT fk_HABITACION_ALOJAMIENTO1
FOREIGN KEY (cod_alojamiento)
REFERENCES ALOJAMIENTO(cod_alojamiento)
ON UPDATE CASCADE
);
CREATE TABLE EMPLEADOS(
cod_personal INT PRIMARY KEY NOT NULL,
nif VARCHAR(10) NOT NULL,
cod_jefe INT,
cod_alojamiento INT,
CONSTRAINT fk_EMPLEADOS_PERSONA
FOREIGN KEY (nif)
REFERENCES PERSONA(nif)
ON DELETE CASCADE
ON UPDATE CASCADE,
CONSTRAINT fk_EMPLEADOS_JEFE
FOREIGN KEY (cod_jefe)
REFERENCES EMPLEADOS(cod_personal)
ON DELETE NO ACTION
ON UPDATE NO ACTION,
CONSTRAINT fk_EMPLEADOS_ALOJAMIENTO1
FOREIGN KEY (cod_alojamiento)
REFERENCES ALOJAMIENTO(cod_alojamiento)
ON DELETE CASCADE
ON UPDATE CASCADE);
CREATE TABLE ACTIVIDADES(
cod_actividad INT PRIMARY KEY NOT NULL,
nombre VARCHAR(45),
descripcion VARCHAR(100),
nivel TINYINT
);
CREATE TABLE REALIZA(
cod_alojamiento INT NOT NULL,
cod_actividad INT NOT NULL,
dia VARCHAR(10),
CONSTRAINT pk_realiza PRIMARY KEY(cod_alojamiento, cod_actividad),
CONSTRAINT fk_ALOJAMIENTO_has_ACTIVIDADES_ALOJAMIENTO
FOREIGN KEY(cod_alojamiento)
REFERENCES ALOJAMIENTO(cod_alojamiento)
ON DELETE CASCADE
ON UPDATE CASCADE,
CONSTRAINT fk_ALOJAMIENTO_has_ACTIVIDADES_ACTIVIDAD1
FOREIGN KEY(cod_actividad)
REFERENCES ACTIVIDADES(cod_actividad)
ON DELETE CASCADE
ON UPDATE CASCADE);
